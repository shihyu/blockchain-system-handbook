<!DOCTYPE HTML>
<html lang="zh-TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>第6章 區塊鏈技術的發展趨勢 - 工程師等級 Web3 系統全圖（完整版）</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">工程師等級 Web3 系統全圖（完整版）</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="第6章-區塊鏈技術的發展趨勢"><a class="header" href="#第6章-區塊鏈技術的發展趨勢">第6章 區塊鏈技術的發展趨勢</a></h1>
<p>本章聚焦「落地」：公鏈與聯盟鏈如何選、產業怎麼用、合規如何進系統設計。</p>
<h2 id="61-公鏈與聯盟鏈"><a class="header" href="#61-公鏈與聯盟鏈">6.1 公鏈與聯盟鏈</a></h2>
<h3 id="611-公鏈與聯盟鏈的對比-p1"><a class="header" href="#611-公鏈與聯盟鏈的對比-p1">6.1.1 公鏈與聯盟鏈的對比 <code>P1</code></a></h3>
<p>對比維度：</p>
<ul>
<li>開放性：公鏈高，聯盟鏈中</li>
<li>去中心化：公鏈高，聯盟鏈可控</li>
<li>性能：聯盟鏈通常更高</li>
<li>治理：公鏈社群治理，聯盟鏈機構治理</li>
</ul>
<p>公鏈（Public Blockchain）和聯盟鏈（Consortium Blockchain）是區塊鏈落地的兩條主要路徑，它們的設計哲學有根本性的差異。公鏈追求的是「無許可」（permissionless）——任何人都可以加入網路、發送交易、甚至參與共識，不需要任何人的批准。聯盟鏈則是「有許可」（permissioned）——只有經過授權的機構才能運行節點、參與共識，一般使用者可能需要經過 KYC 才能發送交易。</p>
<pre><code class="language-text">公鏈 vs 聯盟鏈架構對比：

公鏈 (Permissionless):
┌───────────────────────────────────────┐
│  任何人都可以:                         │
│  ├── 運行全節點                       │
│  ├── 發送交易                         │
│  ├── 部署合約                         │
│  └── 參與共識 (質押/挖礦)             │
│                                       │
│  節點數: 數千-數萬                     │
│  TPS: 10-100 (L1), 1000+ (L2)       │
│  最終性: 分鐘級                       │
│  代表: Ethereum, Bitcoin, Solana     │
└───────────────────────────────────────┘

聯盟鏈 (Permissioned):
┌───────────────────────────────────────┐
│  授權機構可以:                         │
│  ├── 運行共識節點 (需批准)             │
│  ├── 管理權限 (RBAC)                  │
│  └── 設定交易規則和隱私策略            │
│                                       │
│  節點數: 數十-數百                     │
│  TPS: 1000-10000+                    │
│  最終性: 秒級 (BFT)                   │
│  代表: Hyperledger Fabric, FISCO BCOS│
└───────────────────────────────────────┘
</code></pre>
<p>選型結論：</p>
<ul>
<li>對外資產流通與生態組合 -&gt; 公鏈</li>
<li>跨機構內部協作與合規主導 -&gt; 聯盟鏈</li>
</ul>
<p>選型決策不是非黑即白的。越來越多的專案採用混合架構——核心業務邏輯在聯盟鏈上運行（高效能、可控、合規），但資產結算或跨生態互動透過公鏈或公鏈上的 L2 進行。例如，某銀行可能在 Hyperledger Fabric 上運行貿易融資流程，但在以太坊上發行代幣化的資產。</p>
<p>工程師在做選型時需要考慮的核心問題包括：(1) 資料是否需要對公眾可見？如果是，公鏈更適合（透明性是內建的）。(2) 是否需要嚴格的身份管理？如果是，聯盟鏈更適合。(3) 性能需求是多少？如果需要高 TPS 且延遲要求嚴格，聯盟鏈更有優勢。(4) 是否需要與現有 DeFi 生態互動？如果是，公鏈是唯一選擇。(5) 監管合規要求是什麼？某些司法管轄區可能要求資料不離境，這時聯盟鏈的私有部署是必要的。</p>
<h3 id="612-常見聯盟鏈平臺-p2"><a class="header" href="#612-常見聯盟鏈平臺-p2">6.1.2 常見聯盟鏈平臺 <code>P2</code></a></h3>
<p>常見平台：</p>
<ul>
<li>Hyperledger Fabric</li>
<li>FISCO BCOS</li>
<li>Quorum</li>
</ul>
<p><strong>Hyperledger Fabric</strong> 是目前最成熟的企業級聯盟鏈平台，由 Linux Foundation 主導，IBM 是最主要的貢獻者。Fabric 的獨特設計在於「Execute-Order-Validate」架構（與傳統區塊鏈的 Order-Execute 不同），以及 Channel 機制——不同的業務可以在不同的 Channel 中運行，實現資料隔離。</p>
<pre><code class="language-text">Hyperledger Fabric 架構：

┌─────────────────────────────────────────────────┐
│                   Application                     │
│                   (SDK/REST)                       │
└────────────────────────┬────────────────────────┘
                         │
┌────────────────────────v────────────────────────┐
│                Peer Nodes                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐      │
│  │ Endorser  │  │ Endorser  │  │ Committer │      │
│  │ (Org A)   │  │ (Org B)   │  │ (Org C)   │      │
│  │ +Chaincode│  │ +Chaincode│  │           │      │
│  └──────────┘  └──────────┘  └──────────┘      │
└────────────────────────┬────────────────────────┘
                         │
┌────────────────────────v────────────────────────┐
│              Ordering Service                     │
│         (Raft / Kafka / BFT)                      │
│  負責交易排序，不執行交易邏輯                      │
└─────────────────────────────────────────────────┘

執行流程 (Execute-Order-Validate):
1. Execute: Client 發送交易提案給 Endorser
   → Endorser 執行 Chaincode，返回簽名背書
2. Order: Client 將背書後的交易發送給 Orderer
   → Orderer 排序並打包成區塊
3. Validate: Committer 驗證背書策略和讀寫集衝突
   → 有效交易更新 State DB (CouchDB/LevelDB)
</code></pre>
<p><strong>FISCO BCOS</strong> 是由微眾銀行牽頭、金鏈盟（金融區塊鏈合作聯盟）開源的聯盟鏈平台，在中國大陸的政務、金融、供應鏈等場景中應用廣泛。它支持群組架構（類似 Fabric 的 Channel）、國密演算法（SM2/SM3/SM4），以及 PBFT 和 RAFT 共識。</p>
<p><strong>Quorum</strong> 是 JPMorgan 基於以太坊 Geth 客戶端開發的聯盟鏈平台，後來捐贈給 ConsenSys 維護。它的優勢在於與以太坊工具鏈的兼容性——Solidity 合約可以直接部署到 Quorum，開發者的學習成本較低。Quorum 還提供了 Private Transaction 功能，使用 Tessera 組件實現交易資料的選擇性共享。</p>
<p>工程關注：</p>
<ul>
<li>權限模型</li>
<li>節點身份管理</li>
<li>審計接口</li>
</ul>
<p>在聯盟鏈的工程實踐中，<strong>權限模型</strong>的設計往往比技術實現更複雜。需要回答的問題包括：誰能部署合約？誰能調用哪些合約函數？誰能讀取哪些資料？權限變更需要幾方同意？這些問題不僅涉及技術，更涉及機構間的信任關係和業務流程。一個好的聯盟鏈權限系統應該支持基於角色的存取控制（RBAC）、細粒度的資料可見性控制、以及可審計的權限變更歷史。</p>
<h3 id="613-baas平臺-p2"><a class="header" href="#613-baas平臺-p2">6.1.3 BaaS平臺 <code>P2</code></a></h3>
<p>BaaS 優點：快速部署、降低運維門檻。
風險：供應商鎖定與可移植性不足。</p>
<p>BaaS（Blockchain-as-a-Service）是雲服務商提供的「一鍵部署區塊鏈」服務。主要的 BaaS 平台包括 AWS Managed Blockchain、Azure Blockchain Service（已停止）、阿里雲 BaaS、騰訊雲 TBaaS 等。這些平台將區塊鏈節點的部署、監控、升級等運維工作封裝成雲服務，使企業不需要深入了解底層技術就能使用區塊鏈。</p>
<pre><code class="language-text">BaaS 架構示意：

┌────────────────────────────────────────┐
│            企業應用層                     │
│  ┌──────┐ ┌──────┐ ┌──────┐           │
│  │供應鏈  │ │存證   │ │金融   │           │
│  │管理   │ │系統   │ │結算   │           │
│  └──┬───┘ └──┬───┘ └──┬───┘           │
│     └────────┼────────┘                │
│              │ SDK / API                │
├──────────────v─────────────────────────┤
│          BaaS 平台                      │
│  ┌───────────────────────────────┐     │
│  │ 控制面板 (Dashboard)           │     │
│  │ - 節點管理                     │     │
│  │ - 合約部署                     │     │
│  │ - 監控告警                     │     │
│  │ - 權限管理                     │     │
│  └───────────────────────────────┘     │
│  ┌───────────────────────────────┐     │
│  │ 底層鏈 (Fabric/BCOS/Quorum)   │     │
│  │ - 自動部署                     │     │
│  │ - 自動擴容                     │     │
│  │ - 資料備份                     │     │
│  └───────────────────────────────┘     │
├────────────────────────────────────────┤
│          雲基礎設施 (IaaS)              │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐         │
│  │VM 1│ │VM 2│ │VM 3│ │VM 4│         │
│  └────┘ └────┘ └────┘ └────┘         │
└────────────────────────────────────────┘
</code></pre>
<p>BaaS 的價值主要體現在概念驗證（PoC）階段和中小企業。對於大型企業或對資料主權有嚴格要求的場景，BaaS 的風險不可忽視：(1) <strong>供應商鎖定</strong>——BaaS 平台通常提供專有的管理 API 和 SDK，遷移到其他平台或自建環境成本高；(2) <strong>資料主權</strong>——區塊鏈節點運行在雲廠商的基礎設施上，資料的實際控制權存疑；(3) <strong>可審計性</strong>——雲環境的變更（如安全修補）可能影響鏈的一致性。</p>
<p>工程上的建議是：在 PoC 階段可以使用 BaaS 快速啟動，但在生產環境中，應該確保核心節點由自己或可信第三方運維，並建立從 BaaS 到自建環境的遷移路徑。</p>
<h3 id="614-區塊鏈應用的合規性-p1"><a class="header" href="#614-區塊鏈應用的合規性-p1">6.1.4 區塊鏈應用的合規性 <code>P1</code></a></h3>
<p>合規重點：</p>
<ul>
<li>KYC/AML 流程與留存</li>
<li>交易監控與可疑活動上報</li>
<li>資料保護與跨境傳輸要求</li>
</ul>
<p>合規性是區塊鏈從技術實驗走向產業落地的最大門檻之一。不同司法管轄區對區塊鏈應用有不同的監管要求，工程師需要理解這些要求，並將其融入系統設計中。</p>
<pre><code class="language-text">合規考量維度：

┌─────────────────────────────────────────────────┐
│                 合規架構                          │
├─────────────────────────────────────────────────┤
│                                                  │
│  1. 身份識別 (KYC)                               │
│     ├── 用戶註冊時收集身份資訊                    │
│     ├── 定期重新驗證                              │
│     └── 與鏈上地址建立映射                        │
│                                                  │
│  2. 反洗錢 (AML)                                 │
│     ├── 交易模式監控（大額、頻繁、分拆等）         │
│     ├── 可疑活動報告 (SAR)                        │
│     └── 制裁名單篩查 (OFAC/UN)                   │
│                                                  │
│  3. 資料保護                                     │
│     ├── GDPR「被遺忘權」vs 區塊鏈不可篡改         │
│     ├── 個資去識別化/加密存儲                     │
│     └── 跨境資料傳輸限制                          │
│                                                  │
│  4. 證券法規                                     │
│     ├── Token 是否構成證券？(Howey Test)          │
│     ├── 發行是否需要注冊？                        │
│     └── 交易平台是否需要牌照？                    │
│                                                  │
└─────────────────────────────────────────────────┘
</code></pre>
<p><strong>GDPR 與區塊鏈的矛盾</strong>是最常被討論的合規問題之一。GDPR 賦予歐盟公民「被遺忘權」（right to be forgotten）——即要求資料控制者刪除其個人資料的權利。但區塊鏈的核心特性是資料不可篡改。工程解決方案包括：(1) 只在鏈上存儲加密後的資料 hash，原始資料存儲在鏈下——刪除鏈下資料即可「遺忘」；(2) 使用 chameleon hash 等特殊密碼學結構，允許在不破壞鏈完整性的情況下修改特定資料；(3) 在聯盟鏈中實施「可編輯區塊鏈」（editable blockchain），在治理委員會的同意下修改歷史資料。</p>
<p>工程落地：</p>
<ul>
<li>將合規規則做成 policy engine</li>
<li>關鍵交易保留審批證據鏈</li>
</ul>
<p><strong>Policy Engine</strong> 是合規系統工程化的核心模式。與其在每個業務邏輯中硬編碼合規規則，不如建立一個獨立的 policy engine，將合規規則以可配置的方式表達。例如，使用 Open Policy Agent（OPA）或自建的規則引擎來定義：「單筆交易金額超過 10,000 美元需要額外審批」「來自高風險國家的地址需要增強盡職調查」。這種架構使合規規則可以在不修改業務程式碼的情況下快速更新——在監管環境快速變化的區塊鏈領域，這種靈活性至關重要。</p>
<h2 id="62-聯盟鏈與基礎建設"><a class="header" href="#62-聯盟鏈與基礎建設">6.2 聯盟鏈與基礎建設</a></h2>
<h3 id="621-數碼化身份-p2"><a class="header" href="#621-數碼化身份-p2">6.2.1 數碼化身份 <code>P2</code></a></h3>
<p>方向：DID + VC（可驗證憑證）。
應用：企業身份、教育證書、供應鏈角色授權。</p>
<p>去中心化身份（Decentralized Identity, DID）是 W3C 制定的標準，旨在讓個人和組織能夠自主管理自己的數位身份，而不依賴中心化的身份提供者（如 Google 帳號或政府資料庫）。DID 與可驗證憑證（Verifiable Credential, VC）一起構成了自主主權身份（Self-Sovereign Identity, SSI）的技術基礎。</p>
<pre><code class="language-text">DID + VC 架構：

┌────────────┐                              ┌────────────┐
│   Issuer    │   簽發 VC (Verifiable        │  Verifier   │
│  (發行者)    │   Credential)               │  (驗證者)    │
│  如: 大學   │──────────────────────&gt;        │  如: 雇主   │
└────────────┘         │                     └──────┬─────┘
                       │                            │
                       v                            │
              ┌────────────────┐                    │
              │    Holder       │                    │
              │   (持有者)       │    出示 VP          │
              │   如: 畢業生     │──────────────────&gt;│
              │                 │  (Verifiable       │
              │ 持有: DID 文件   │   Presentation)    │
              │ 持有: 畢業證書 VC│                    │
              └────────────────┘                    │
                       │                            │
                       v                            v
              ┌─────────────────────────────────────────┐
              │        DID Registry (區塊鏈)             │
              │  - 存儲 DID Document (公鑰、端點)        │
              │  - 不存儲個人資料！                       │
              │  - 任何人都可以解析 DID → 公鑰            │
              └─────────────────────────────────────────┘
</code></pre>
<p>DID 的工程實作需要解決幾個關鍵問題：(1) <strong>DID 方法</strong>——DID 標準是與鏈無關的（did:ethr、did:ion、did:web 等），選擇哪個 DID 方法決定了底層的存儲和解析機制；(2) <strong>憑證格式</strong>——VC 可以用 JSON-LD、JWT 等格式表達，不同格式在大小、可驗證性和工具支持上有不同的取捨；(3) <strong>撤銷機制</strong>——已簽發的 VC 如何被撤銷？常見方案包括撤銷列表（Revocation List）和狀態查詢。</p>
<p>實際案例：歐盟的 EBSI（European Blockchain Services Infrastructure）使用 DID 和 VC 來實現跨國教育證書互認——法國大學簽發的畢業證書可以被德國雇主即時驗證，無需冗長的認證流程。</p>
<h3 id="622-數碼人民幣-p2"><a class="header" href="#622-數碼人民幣-p2">6.2.2 數碼人民幣 <code>P2</code></a></h3>
<p>觀察重點：</p>
<ul>
<li>雙層運營模式</li>
<li>可控匿名</li>
<li>可程式化支付探索</li>
</ul>
<p>數碼人民幣（e-CNY / DC/EP）是中國人民銀行主導的央行數字貨幣（CBDC）項目，是全球最大規模的 CBDC 試驗之一。雖然數碼人民幣的底層技術並非嚴格意義上的區塊鏈（央行層使用的是改良的分散式帳本技術），但它的設計理念和技術挑戰與區塊鏈領域高度相關。</p>
<pre><code class="language-text">數碼人民幣雙層運營模式：

┌──────────────────────────────────────────┐
│              中國人民銀行 (第一層)           │
│  - 發行數碼人民幣                          │
│  - 管理總帳本                              │
│  - 設定貨幣政策                            │
└──────────────────┬───────────────────────┘
                   │ 兌換
                   v
┌──────────────────────────────────────────┐
│         商業銀行/支付機構 (第二層)           │
│  ┌───────┐  ┌───────┐  ┌───────┐        │
│  │工商銀行│  │建設銀行│  │支付寶 │ ...     │
│  └───┬───┘  └───┬───┘  └───┬───┘        │
│      │          │          │             │
│      v          v          v             │
│  ┌──────────────────────────────────┐    │
│  │          一般用戶/商家              │    │
│  │  - 透過 App 持有和使用              │    │
│  │  - 離線支付（碰一碰）               │    │
│  │  - 小額匿名 / 大額實名              │    │
│  └──────────────────────────────────┘    │
└──────────────────────────────────────────┘
</code></pre>
<p><strong>可控匿名</strong>是數碼人民幣最具特色的設計。小額支付不需要提供完整的身份資訊（類似現金的匿名性），但大額支付需要實名認證。央行可以在必要時（如反洗錢調查）追溯交易，但一般商業銀行和商家無法看到完整的交易資訊。這種設計試圖在隱私保護和監管合規之間找到平衡。</p>
<p><strong>可程式化支付</strong>是 CBDC 的潛在殺手級應用。想像一下：政府發放教育補貼，這筆錢只能用於購買書籍和繳納學費，而且只能在一年內使用。透過在數碼貨幣中嵌入智能合約式的條件，可以實現這種精確的資金定向使用。目前數碼人民幣在這方面仍處於探索階段，但已經在消費券、預付款管理等場景中進行了小規模試驗。</p>
<p>從工程角度看，CBDC 的核心挑戰在於：(1) <strong>超高 TPS</strong>——需要支撐十幾億人的日常支付，峰值可能達到數十萬 TPS；(2) <strong>離線支付</strong>——在沒有網路的環境下仍需支持交易，這需要硬體安全模組的支持；(3) <strong>向後兼容</strong>——需要與現有的支付基礎設施（POS 機、ATM、銀行系統）無縫對接。</p>
<h3 id="623-存證溯源平臺-p2"><a class="header" href="#623-存證溯源平臺-p2">6.2.3 存證溯源平臺 <code>P2</code></a></h3>
<p>典型場景：</p>
<ul>
<li>合同存證</li>
<li>供應鏈溯源</li>
<li>醫療/司法資料指紋</li>
</ul>
<p>存證溯源是區塊鏈在聯盟鏈場景中最成熟、落地最廣泛的應用類型。其核心價值在於：利用區塊鏈的不可篡改性，為資料提供一個可信的時間戳和完整性證明。</p>
<pre><code class="language-text">存證溯源系統架構：

┌──────────────────────────────────────────────┐
│                應用層                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 合同簽署  │  │ 供應鏈   │  │ 司法存證  │   │
│  │ 平台     │  │ 追蹤系統  │  │ 系統     │   │
│  └────┬─────┘  └────┬─────┘  └────┬─────┘   │
│       └─────────────┼─────────────┘          │
│                     │                         │
├─────────────────────v─────────────────────────┤
│              存證服務中間層                      │
│  ┌──────────────────────────────────────┐    │
│  │ 1. 計算資料 hash (SHA-256)            │    │
│  │ 2. 附加時間戳和簽名                    │    │
│  │ 3. 提交 hash 到區塊鏈                 │    │
│  │ 4. 返回存證憑據 (txHash + blockNum)   │    │
│  └──────────────────────────────────────┘    │
│                     │                         │
├─────────────────────v─────────────────────────┤
│              區塊鏈層 (聯盟鏈)                  │
│  ┌──────────────────────────────────────┐    │
│  │ 存儲: 資料 hash + 時間戳 + 提交者 ID  │    │
│  │ 不存儲原始資料！(隱私 + 效能考量)      │    │
│  └──────────────────────────────────────┘    │
└──────────────────────────────────────────────┘

驗證流程:
1. 提供原始資料
2. 重新計算 hash
3. 與鏈上記錄比對
4. hash 一致 → 資料未被篡改 ✓
</code></pre>
<p><strong>合同存證</strong>是中國大陸應用最廣泛的場景之一。杭州互聯網法院在 2018 年首次採納了區塊鏈存證作為電子證據。實務中，電子合同平台在合同簽署後將合同 hash 寫入區塊鏈，日後發生糾紛時可以證明合同內容未被篡改。天平鏈、螞蟻鏈司法存證等平台已經處理了數十億條存證記錄。</p>
<p><strong>供應鏈溯源</strong>是另一個高價值場景。以食品溯源為例，每個環節（農場、加工廠、物流、零售）將關鍵資料（批次號、檢測結果、溫度記錄）的 hash 寫入區塊鏈，消費者可以掃描產品上的二維碼查看完整的供應鏈資訊。沃爾瑪（Walmart）與 IBM 合作的食品溯源專案是最知名的案例——芒果的溯源時間從 7 天縮短到了 2.2 秒。</p>
<p>工程上需要注意的關鍵問題是 <strong>Oracle Problem</strong>——區塊鏈只能保證鏈上資料的不可篡改性，但無法保證上鏈前的資料是真實的。如果有人在食品檢測環節造假，然後把假的檢測結果 hash 寫入鏈上，區塊鏈無法識別這是假資料。因此，存證溯源系統的可信度取決於整個資料鏈條中最薄弱的環節，而不僅僅是區塊鏈本身。配合 IoT 設備自動採集資料、多方交叉驗證、以及可信執行環境（TEE）等技術，可以提升整體系統的可信度。</p>
<h2 id="63-公鏈的熱門應用方向"><a class="header" href="#63-公鏈的熱門應用方向">6.3 公鏈的熱門應用方向</a></h2>
<h3 id="631-去中心化交易所-p1"><a class="header" href="#631-去中心化交易所-p1">6.3.1 去中心化交易所 <code>P1</code></a></h3>
<p>DEX 核心：</p>
<ul>
<li>AMM（x*y=k）</li>
<li>集中流動性</li>
<li>訂單路由與滑點控制</li>
</ul>
<p>風險：MEV、流動性斷層、預言機偏差。</p>
<p>去中心化交易所（Decentralized Exchange, DEX）是 DeFi 生態中最基礎的元件。與中心化交易所（CEX）不同，DEX 不需要用戶將資產託管給交易所——交易完全在智能合約中執行，用戶始終保持對資產的控制權。Uniswap、Curve、PancakeSwap 是最知名的 DEX。</p>
<pre><code class="language-text">AMM (Automated Market Maker) 原理：

Uniswap V2: 恆定乘積公式 x * y = k

流動性池:
┌──────────────────────────────────────┐
│          Liquidity Pool               │
│                                       │
│  ETH 儲備 (x): 100 ETH              │
│  USDC 儲備 (y): 200,000 USDC        │
│  k = 100 * 200,000 = 20,000,000     │
│                                       │
│  價格 = y/x = 2,000 USDC/ETH        │
└──────────────────────────────────────┘

交易過程（買入 1 ETH）:
  新的 x = 100 - 1 = 99 ETH
  新的 y = k / x = 20,000,000 / 99 = 202,020.20 USDC
  用戶支付: 202,020.20 - 200,000 = 2,020.20 USDC
  實際價格: 2,020.20 USDC/ETH（比「市場價」貴 ~1%）
  → 這就是「滑點」(slippage)


Uniswap V3: 集中流動性
┌──────────────────────────────────────┐
│  傳統 AMM: 流動性均勻分佈在 0-∞      │
│  ════════════════════════════         │
│                                       │
│  V3 集中流動性: LP 指定價格區間       │
│         ┌────────┐                    │
│  ═══════│████████│═══════             │
│         └────────┘                    │
│         $1800   $2200                 │
│                                       │
│  效果: 相同資金量，在指定區間內提供    │
│        更深的流動性，減少滑點          │
└──────────────────────────────────────┘
</code></pre>
<p><strong>集中流動性</strong>是 Uniswap V3 引入的革命性設計。在 V2 中，流動性均勻分佈在 0 到無窮大的價格範圍中——但實際上大部分交易都發生在一個很窄的價格範圍內。V3 允許流動性提供者（LP）選擇自己要提供流動性的價格區間，大幅提升了資金效率。但這也帶來了新的複雜性——LP 需要主動管理自己的倉位，當價格移出指定區間時，LP 不再賺取手續費且面臨無常損失（impermanent loss）。</p>
<p><strong>MEV 對 DEX 的影響</strong>是一個嚴峻的工程和經濟問題。三明治攻擊讓用戶在每筆交易中損失了隱含成本。Flashbots 的數據顯示，MEV 每天從以太坊用戶身上提取數百萬美元的價值。防禦手段包括：(1) 使用私有交易池（如 Flashbots Protect）繞過公共 mempool；(2) 使用限價訂單（如 1inch Limit Order Protocol）而非市價訂單；(3) 在 L2 上交易，利用 sequencer 的先到先服務排序規則來降低 MEV 風險。</p>
<h3 id="632-defi應用簡介-p1"><a class="header" href="#632-defi應用簡介-p1">6.3.2 DeFi應用簡介 <code>P1</code></a></h3>
<p>核心模組：</p>
<ul>
<li>借貸</li>
<li>穩定幣</li>
<li>衍生品</li>
<li>收益聚合</li>
</ul>
<p>DeFi（Decentralized Finance，去中心化金融）是公鏈上最成功的應用類別，TVL（Total Value Locked，鎖倉量）在高峰期超過 1800 億美元。DeFi 的核心理念是用智能合約替代傳統金融中介——銀行、交易所、保險公司、資產管理公司。</p>
<pre><code class="language-text">DeFi 生態堆疊：

┌─────────────────────────────────────────┐
│              聚合層 (Aggregators)          │
│  ┌─────────┐  ┌──────────┐              │
│  │ 1inch    │  │ Yearn    │ ...          │
│  │(DEX聚合) │  │(收益聚合)│              │
│  └────┬────┘  └────┬─────┘              │
├───────┼────────────┼────────────────────┤
│       │   協議層 (Protocols)              │
│  ┌────v────┐  ┌────v─────┐  ┌────────┐ │
│  │ Uniswap │  │  Aave    │  │ Maker  │ │
│  │ (交易)  │  │ (借貸)   │  │(穩定幣)│ │
│  └─────────┘  └──────────┘  └────────┘ │
├─────────────────────────────────────────┤
│              資產層 (Assets)              │
│  ┌─────┐ ┌──────┐ ┌─────┐ ┌────────┐  │
│  │ ETH │ │ USDC │ │ DAI │ │ WBTC   │  │
│  └─────┘ └──────┘ └─────┘ └────────┘  │
├─────────────────────────────────────────┤
│           結算層 (Settlement)             │
│  ┌─────────────────────────────────┐    │
│  │      Ethereum / L2 Rollup       │    │
│  └─────────────────────────────────┘    │
└─────────────────────────────────────────┘
</code></pre>
<p><strong>借貸協議</strong>是 DeFi 中最核心的元件之一。Aave 和 Compound 是最知名的去中心化借貸協議。用戶可以存入資產作為抵押品，並借出另一種資產。利率根據供需動態調整——當某資產的借出率增加時，利率上升以激勵更多存款。清算機制是借貸協議安全性的關鍵——當抵押品價值低於清算閾值時，任何人都可以清算這個倉位，獲得清算獎勵。</p>
<p><strong>穩定幣</strong>是 DeFi 的「血液」。主流穩定幣分為三類：(1) 法幣抵押型（USDT、USDC）——由中心化機構持有等值法幣或國債作為儲備；(2) 加密資產超額抵押型（DAI）——用戶抵押 ETH 等加密資產，鑄造價值較低的穩定幣；(3) 演算法型——透過演算法控制供給來維持錨定，但歷史上多次失敗（最著名的是 2022 年 Terra/UST 的崩盤，導致約 400 億美元蒸發）。</p>
<p>工程關鍵：</p>
<ul>
<li>清算機制可用性</li>
<li>風險參數治理</li>
<li>依賴協議傳染風險</li>
</ul>
<p><strong>依賴協議傳染風險</strong>是 DeFi 工程中最容易被低估的問題。DeFi 協議之間像樂高一樣組合——Yearn 的策略可能把資金存入 Aave，Aave 的抵押品可能是 Curve 的 LP Token，而 Curve 的池子裡可能包含 MakerDAO 鑄造的 DAI。這種深度嵌套意味著一個協議的問題可能引發連鎖反應。2022 年的 Terra/LUNA 崩盤就是一個例子——UST 脫鉤導致使用 UST 作為資產的多個 DeFi 協議同時出現問題，引發了「DeFi 的雷曼時刻」。工程上的防禦措施包括：對單一資產/協議的曝光設定上限、壓力測試極端場景、以及建立自動化的風險監控和斷路器機制。</p>
<h3 id="633-ipfs應用簡介-p2"><a class="header" href="#633-ipfs應用簡介-p2">6.3.3 IPFS應用簡介 <code>P2</code></a></h3>
<p>IPFS 是內容尋址網路，常與鏈配合儲存大文件。</p>
<p>IPFS（InterPlanetary File System）是一個去中心化的檔案存儲和分享協議。與傳統的位置尋址（URL 指向伺服器位置）不同，IPFS 使用<strong>內容尋址</strong>——檔案的地址是其內容的 hash（稱為 CID，Content Identifier）。這意味著同一份檔案無論存儲在哪裡，都有相同的地址；而且如果檔案內容被修改，地址就會改變。</p>
<pre><code class="language-text">傳統 HTTP vs IPFS：

HTTP (位置尋址):
  URL: https://example.com/images/cat.jpg
  → 向 example.com 的伺服器請求 /images/cat.jpg
  → 如果伺服器當機？→ 檔案無法存取 ❌
  → 如果內容被修改？→ 同一 URL，不同內容 ⚠️

IPFS (內容尋址):
  CID: QmW2WQi7j6c7UgJTarActp7tDNikE4B2qXtFCfLPdsgaTQ
  → 向任何 IPFS 節點請求此 CID
  → 只要任何一個節點有此檔案 → 可存取 ✓
  → CID = hash(內容)，內容被修改 → CID 改變 ✓

IPFS + 區塊鏈:
┌────────────┐     CID      ┌─────────────┐
│  Blockchain │ ◄──────────  │    IPFS      │
│  (鏈上)     │              │  (鏈下)      │
│  存 CID     │              │  存原始資料   │
│  ~32 bytes  │              │  可以很大     │
└────────────┘              └─────────────┘
</code></pre>
<p>工程注意：</p>
<ul>
<li>CID 與 metadata 綁定</li>
<li>pin 策略</li>
<li>可用性 SLA</li>
</ul>
<p><strong>Pin 策略</strong>是 IPFS 工程中最重要的考量。IPFS 節點預設只快取最近存取過的資料，不常存取的資料會被垃圾回收清除。如果你的 NFT 圖片沒有被任何節點 pin 住，它最終會從網路中消失。解決方案有：(1) 自己運行 IPFS 節點並 pin 所有重要資料；(2) 使用 Pinning 服務（Pinata、Infura IPFS、Web3.Storage）；(3) 使用 Filecoin——Filecoin 是 IPFS 的激勵層，礦工透過存儲資料獲得代幣獎勵，提供了經濟激勵來確保資料的長期可用性。</p>
<p>Arweave 是另一個值得關注的去中心化存儲方案。與 IPFS 的「按時間付費」不同，Arweave 採用「一次付費，永久存儲」的模式。用戶只需支付一次性費用，資料就會被永久存儲在 Arweave 網路上。這種模式對 NFT metadata 等需要永久可用的場景特別有吸引力。</p>
<h3 id="634-dfinity應用簡介-p2"><a class="header" href="#634-dfinity應用簡介-p2">6.3.4 DFINITY應用簡介 <code>P2</code></a></h3>
<p>DFINITY（Internet Computer）強調鏈上可執行應用（canister）。</p>
<p>DFINITY 的 Internet Computer Protocol（ICP）是一個與以太坊路線截然不同的區塊鏈專案。它的目標不是「世界帳本」或「世界電腦」，而是「世界雲端」——直接在區塊鏈上運行完整的 Web 應用，包括前端（HTML/CSS/JS）、後端邏輯和資料存儲，完全不需要傳統的雲服務。</p>
<pre><code class="language-text">傳統 DApp vs ICP DApp:

傳統 DApp:
┌──────────┐   ┌──────────┐   ┌──────────┐
│ 前端      │   │ 後端 API  │   │ 智能合約  │
│ (Vercel) │──&gt;│ (AWS)    │──&gt;│(Ethereum)│
│ 中心化    │   │ 中心化    │   │ 去中心化  │
└──────────┘   └──────────┘   └──────────┘
  ⚠️ 前端和後端仍然是中心化的

ICP DApp:
┌─────────────────────────────────────────┐
│            Internet Computer             │
│  ┌─────────────────────────────────┐    │
│  │         Canister (容器)          │    │
│  │  ┌────────┐ ┌───────┐ ┌─────┐ │    │
│  │  │ 前端   │ │ 後端   │ │存儲 │ │    │
│  │  │ HTML/JS│ │ Motoko │ │     │ │    │
│  │  └────────┘ └───────┘ └─────┘ │    │
│  └─────────────────────────────────┘    │
│  全部運行在去中心化的子網上               │
└─────────────────────────────────────────┘
  ✓ 前端、後端、存儲全部去中心化
</code></pre>
<p>關注點：</p>
<ul>
<li>執行模型</li>
<li>開發工具鏈</li>
<li>生態互通性</li>
</ul>
<p>ICP 使用 <strong>Canister</strong>（容器）作為基本的計算單元，類似於以太坊的智能合約但功能更強大。Canister 可以存儲 GB 級的資料（以太坊合約存儲極其昂貴）、直接回應 HTTP 請求（以太坊合約不行）、以及進行跨 Canister 的異步調用。ICP 使用 <strong>Chain Key 密碼學</strong>讓子網之間可以高效通訊，並提供了 <strong>Cycle</strong> 作為計算資源的計費單位（類似以太坊的 Gas，但成本低得多）。</p>
<p>ICP 的開發語言是 <strong>Motoko</strong>（專為 ICP 設計的語言）或 <strong>Rust</strong>。Motoko 的設計考慮了 Actor 模型和異步編程，與 Canister 的執行模型天然匹配。但生態較小是 ICP 面臨的主要挑戰——相比以太坊龐大的開發者社群和工具鏈，ICP 的開發者資源和 DeFi 流動性都還比較有限。</p>
<p>ICP 最有意思的特性是 <strong>Bitcoin 和 Ethereum 整合</strong>——Canister 可以直接持有比特幣（不需要橋或 wrapped token），並在 ICP 上執行比特幣交易。這是透過 Chain Key 簽名和門限 ECDSA 實現的。如果這個方向成熟，它可能會為跨鏈互操作提供一種全新的範式。</p>
<h2 id="落地趨勢全景回顧"><a class="header" href="#落地趨勢全景回顧">落地趨勢全景回顧</a></h2>
<p>趨勢不是單看技術新舊，而是「安全、合規、成本、治理」四維同時可落地。</p>
<p>區塊鏈落地的核心挑戰從來不是技術本身——技術已經足夠成熟，能夠支撐絕大多數應用場景。真正的挑戰在於如何在現實世界的約束條件下做出正確的取捨。</p>
<p><strong>安全</strong>是第一優先級。無論是公鏈還是聯盟鏈，安全事故都會直接導致資金損失和信任崩塌。2022 年的跨鏈橋攻擊、DeFi 閃電貸攻擊、以及多個 CEX 的倒閉，讓整個行業付出了數百億美元的學費。工程師需要將安全作為設計的核心約束，而不是事後的附加要求。</p>
<p><strong>合規</strong>是不可迴避的現實。全球監管環境正在快速演變——歐盟的 MiCA（Markets in Crypto-Assets Regulation）、美國 SEC 對加密資產的分類、中國對虛擬貨幣交易的禁止但對區塊鏈技術的鼓勵。工程師需要理解這些監管要求，並將合規能力（KYC、AML、資料保護）設計為系統的基本功能，而非可選插件。</p>
<p><strong>成本</strong>決定了商業可行性。鏈上操作的成本（Gas 費、存儲費）需要與業務收益相匹配。以太坊主網上一次簡單的 ERC-20 轉帳在高峰期可能花費數十美元——對於小額支付場景，這是不可接受的。L2、聯盟鏈、以及鏈上鏈下混合架構都是降低成本的方法。</p>
<p><strong>治理</strong>決定了系統的長期可持續性。誰來決定協議的升級方向？參數如何調整？出現問題時誰負責？公鏈的鏈上治理（如 Compound 的 Governor 合約）和聯盟鏈的委員會治理各有優劣。沒有完美的治理模型，但沒有治理模型的系統注定無法長久。</p>
<pre><code class="language-text">區塊鏈落地決策矩陣：

┌──────────┬────────────┬────────────┬────────────┐
│ 場景      │ 推薦方案    │ 核心考量    │ 代表案例    │
├──────────┼────────────┼────────────┼────────────┤
│ DeFi     │ 公鏈 + L2  │ 流動性、    │ Uniswap,   │
│          │            │ 可組合性    │ Aave       │
├──────────┼────────────┼────────────┼────────────┤
│ 供應鏈   │ 聯盟鏈     │ 隱私、合規  │ IBM Food   │
│          │            │ 身份管理    │ Trust      │
├──────────┼────────────┼────────────┼────────────┤
│ 數位身份 │ 混合       │ 互通性、    │ Polygon ID │
│          │            │ 標準化      │            │
├──────────┼────────────┼────────────┼────────────┤
│ 支付結算 │ CBDC /     │ TPS、離線   │ e-CNY,     │
│          │ 聯盟鏈     │ 合規       │ JPM Coin   │
├──────────┼────────────┼────────────┼────────────┤
│ NFT/遊戲 │ 公鏈 + L2  │ 用戶體驗、  │ Immutable  │
│          │            │ 低手續費    │ zkEVM      │
├──────────┼────────────┼────────────┼────────────┤
│ 存證溯源 │ 聯盟鏈     │ 法律效力、  │ 天平鏈、    │
│          │            │ 成本       │ 螞蟻鏈     │
└──────────┴────────────┴────────────┴────────────┘
</code></pre>
<h2 id="白話總結"><a class="header" href="#白話總結">白話總結</a></h2>
<p>區塊鏈到底該怎麼落地？其實就看你的場景需要什麼。如果你做的是面向全球用戶的金融應用，需要跟各種 DeFi 協議互動，那就用公鏈或 L2。如果你做的是銀行之間的結算系統或者企業供應鏈管理，數據不想讓全世界看到，那聯盟鏈更適合。BaaS 平台可以讓你快速搭起一套區塊鏈環境試試水，但真上生產環境的時候要小心被雲廠商綁架。合規這件事不能事後再想——KYC、AML、數據保護法規一開始就要設計進系統裡。DEX 和 DeFi 是公鏈上最成功的應用，但 MEV 和合約安全問題依然讓人頭痛。存證溯源是聯盟鏈上最成熟的場景，已經在法院和供應鏈中廣泛使用了。最重要的一句話：技術選型沒有「最好」，只有「最適合你的場景」——安全、合規、成本、治理這四個維度缺一不可。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch05-blockchain-principles.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="part-3-blockchain-dev.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch05-blockchain-principles.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="part-3-blockchain-dev.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
