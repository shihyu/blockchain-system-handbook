# 4. 網路、資料與節點結構

## 4.1 節點角色
- Full Node: 驗證區塊與狀態
- Archive Node: 保存全歷史狀態
- Validator/Sequencer: 產生或排序區塊
- Light Client: 驗證區塊頭與證明

## 4.2 P2P 與 Mempool
- 交易先進 mempool，再由出塊者選擇
- 費率市場決定打包優先序
- 私有交易通道可降低搶跑風險

## 4.3 狀態資料結構
- Merkle Tree / Patricia Trie / Sparse Merkle
- 目標: 可驗證包含性與歷史一致性

## 4.4 企業級節點拓撲

```text
                   ┌──────────────┐
                   │ Load Balancer│
                   └──────┬───────┘
                          │
     ┌────────────────────┼────────────────────┐
     v                    v                    v
┌───────────┐       ┌───────────┐       ┌───────────┐
│ RPC Node A│       │ RPC Node B│       │ RPC Node C│
└─────┬─────┘       └─────┬─────┘       └─────┬─────┘
      │                   │                   │
      v                   v                   v
 ┌─────────┐         ┌─────────┐         ┌─────────┐
 │Indexer  │         │Indexer  │         │Indexer  │
 └────┬────┘         └────┬────┘         └────┬────┘
      └──────────────┬────┴────┬──────────────┘
                     v         v
               ┌────────────────────┐
               │ Data Lake / SIEM   │
               └────────────────────┘
```

## 4.5 實務要點
- 不依賴單一 RPC 廠商
- 讀寫流量分離
- 區塊高度一致性監控
- 延遲尖峰與 fork 告警

## 白話說明
節點不是「連上就好」，而是你系統可用性的地基。少一層冗餘，事故就會放大。
